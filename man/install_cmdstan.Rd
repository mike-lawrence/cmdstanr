% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/install.R
\name{install_cmdstan}
\alias{install_cmdstan}
\alias{rebuild_cmdstan}
\alias{cmdstan_make_local}
\alias{check_cmdstan_toolchain}
\title{Install CmdStan or clean and rebuild an existing installation}
\usage{
install_cmdstan(
  dir = NULL,
  cores = getOption("mc.cores", 2),
  quiet = FALSE,
  overwrite = FALSE,
  timeout = 1200,
  release_url = NULL,
  cpp_options = list()
)

rebuild_cmdstan(
  dir = cmdstan_path(),
  cores = getOption("mc.cores", 2),
  quiet = FALSE,
  timeout = 600
)

cmdstan_make_local(dir = cmdstan_path(), cpp_options = NULL, append = TRUE)

check_cmdstan_toolchain(fix = FALSE, quiet = FALSE)
}
\arguments{
\item{dir}{Path to the directory in which to install CmdStan. The default is
to install it in a directory called \code{.cmdstanr} within the user's home
directory (i.e, \code{file.path(Sys.getenv("HOME"), ".cmdstanr")}).}

\item{cores}{The number of CPU cores to use to parallelize building CmdStan
and speed up installation. If \code{cores} is not specified then the default is
to look for the option \code{"mc.cores"}, which can be set for an entire \R
session by \code{options(mc.cores=value)}. If the \code{"mc.cores"} option has not
been set then the default is \code{2}.}

\item{quiet}{For \code{check_cmdstan_toolchain()}, should the function supress
printing informational messages? The default is \code{FALSE}.
If \code{TRUE} the function will only print errors.}

\item{overwrite}{When an existing installation is found in \code{dir}, should
CmdStan still be downloaded and reinstalled? The default is \code{FALSE}, in
which case an informative error is thrown instead of overwriting the user's
installation.}

\item{timeout}{Timeout (in seconds) for the CmdStan build stage of the
installation process.}

\item{release_url}{Specifies the URL to a specific Cmdstan release to be
installed. By default set to \code{NULL}, which downloads the latest stable
release from \href{https://github.com/stan-dev/cmdstan/releases}{GitHub}.}

\item{cpp_options}{A list specifying any makefile flags/variables to be
written to the \code{make/local} file. For example, \code{list("CXX" = "clang++")}
will force the use of clang for compilation.}

\item{append}{For \code{cmdstan_make_local()}, should the listed makefile flags be
appended to the end of the existing \code{make/local} file? The default is \code{TRUE}.
If \code{FALSE} the file is overwritten.}

\item{fix}{For \code{check_cmdstan_toolchain()}, should the function install
attempt to fix toolchain issues. This function currently only attempts
fixing Windows toolchain issues. The default is \code{FALSE},
If \code{FALSE}, the function will only report issues.}
}
\value{
For \code{cmdstan_make_local()}, if \code{cpp_options=NULL} then the existing
contents of \code{make/local} are returned without writing anything, otherwise
the updated contents are returned.
}
\description{
The \code{install_cmdstan()} function attempts to download and
install the latest release of
\href{https://github.com/stan-dev/cmdstan/releases/latest}{CmdStan}. Installing
a previous release or a new release candidate is also possible by
specifying the \code{release_url} argument. Currently the necessary C++ tool
chain is assumed to be available, but in the future CmdStanR may help
install the requirements. See the first few sections of the
CmdStan \href{https://mc-stan.org/docs/2_24/cmdstan-guide/cmdstan-installation.html}{installation guide}
for details on the required toolchain.

The \code{rebuild_cmdstan()} function cleans and rebuilds the cmdstan
installation. Use this function in case of any issues when compiling
models.

The \code{cmdstan_make_local()} function is used to read/write makefile flags
and variables from/to the \code{make/local} file of a CmdStan installation.
Writing to the \code{make/local} file can be used to permanently add makefile
flags/variables to an installation. For example adding specific compiler
switches, changing the C++ compiler, etc. A change to the \code{make/local} file
should typically be followed by calling \code{rebuild_cmdstan()}.
}
\examples{
# install_cmdstan(cores = 4)

cpp_options <- list(
  "CXX" = "clang++",
  "CXXFLAGS+= -march-native",
  PRECOMPILED_HEADERS = TRUE
)
# cmdstan_make_local(cpp_options = cpp_options)
# rebuild_cmdstan()

# check_cmdstan_toolchain(fix = FALSE, quiet = FALSE)

}
